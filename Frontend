// ---------------------------------------------------------------------------
// Template Request Screen
// ---------------------------------------------------------------------------

import React, { useState, useEffect, useMemo, useCallback } from "react";
import {
  Box,
  Dialog,
  DialogTitle,
  DialogContent,
  DialogActions,
  TextField,
  Typography,
  Button,
  Stack,
  Tooltip,
  IconButton,
  Divider,
} from "@mui/material";
import InfoIcon from "@mui/icons-material/Info";
import { DataGrid } from "@mui/x-data-grid";
import { Check, Clear, Visibility } from "@mui/icons-material";
import AddBoxIcon from "@mui/icons-material/AddBox";
import AutoDeleteIcon from "@mui/icons-material/AutoDelete";
import EditDocumentIcon from "@mui/icons-material/EditDocument";
import AccountCircleIcon from "@mui/icons-material/AccountCircle";
import { useNavigate } from "react-router-dom";
import { useSelector } from "react-redux";
import useApi from "../../hooks/useApi";
import useCustomSnackbar from "../../utils/useCustomSnackbar";
// import { COMMON_REQ_SCREEN_CONFIGS } from "../common/CommonConstants";
import CustomChip from "../../utils/CustomChip";
import TemplateRequestAnalytics from "./TemplateRequestAnalytics";
import ViewRequestDialog from "./ViewRequestDailog";
import { timeStampFormatter } from "../../utils/CommonUtilities";
import { styles } from "./TemplateRequestScreenStyles";
import LoadingOverlay from "../../utils/LoadingOverlay";

export default function TemplateRequestScreen() {
  const selectedMenuItem = useSelector((s) => s.menus.selectedMenuItem);
  const requestType = selectedMenuItem?.requestType || "";
  const navigate = useNavigate();
  const { callApi } = useApi();
  const showSnackBar = useCustomSnackbar();
  // const screenConfig = COMMON_REQ_SCREEN_CONFIGS[selectedMenuItem?.id];
  // const { columns, transformData, processViewData } = screenConfig || {};
  const [loading, setLoading] = useState(false);
  const [dataGridLoading, setDataGridLoading] = useState(true);
  const [rows, setRows] = useState([]);
  const [remarks, setRemarks] = useState("");
  const [viewOpen, setViewOpen] = useState(false);
  const [viewData, setViewData] = useState(null);
  const [confirmDialog, setConfirmDialog] = useState({
    open: false,
    type: null,
    rowId: null,
  });


  const fetchData = useCallback(async () => {
    if (!requestType) return;
    try {
      const response = await callApi(
        "/CR/api/pending-requests",
        { requestType },
        "POST"
      );
      const result = response?.data || [];

      const data = result.map((row) => ({
        ...row,
        ...(typeof row.payload === "object" ? row.payload : {}),
      }));

      setRows(data);
    } catch (err) {
      console.error(err);
      showSnackBar("Error fetching data", "error");
    } finally {
      setRemarks("");
      setDataGridLoading(false);
      setConfirmDialog({
        open: false,
        type: null,
        rowId: null,
      });
    }
  }, [callApi, showSnackBar]);

  useEffect(() => {
    setRows([]);
    setRemarks("");
    setConfirmDialog({ open: false, type: null, rowId: null });
    fetchData();
  }, [fetchData, navigate]);

  const handleConfirm = async () => {
    if (confirmDialog.type === "reject" && remarks.trim().length < 5) {
      showSnackBar(
        "Please provide minimum 5 characters remarks before rejecting",
        "warning"
      );
      return;
    }
    setLoading(true);

    try {
      const payload = {
        requestId: confirmDialog.rowId,
        status: confirmDialog.type === "reject" ? "REJECTED" : "ACCEPTED",
        remarks:
          confirmDialog.type === "reject" ? remarks.trim() : "No Remarks",
      };

      const res = await callApi("/CR/api/update-request", payload, "PATCH");

      if (res?.success || res) {
        showSnackBar(
          confirmDialog.type === "accept"
            ? "Request Approved"
            : "Request Rejected",
          "success"
        );
        fetchData();
      } else {
        showSnackBar("Failed to process request" + res?.message, "error");
      }
    } catch (err) {
      console.error(err);
      showSnackBar("Error while processing request", "error");
    } finally {
      closeConfirmDialog();
      setLoading(false);
    }
  };

  const handleViewClick = (data) => {
    const view = data;
    setViewData(view);
    setViewOpen(true);
  };

  const openConfirmDialog = (type, id) =>
    setConfirmDialog({ open: true, type, rowId: id });

  const closeConfirmDialog = () =>
    setConfirmDialog({ open: false, type: null, rowId: null });

  // Columns
  const allColumns = useMemo(() => {
    return [
      { field: "reportId", headerName: "Report Id", flex: 0.5 },
      { field: "reportName", headerName: "Report Name", flex: 1.2 },

      {
        field: "changeType",
        headerName: "Type",
        flex: 0.6,
       
        renderCell: (p) => {
          const val = p.value;
          return (
            <CustomChip
              icon={
                val === "ADD" ? (
                  <AddBoxIcon />
                ) : val === "DELETE" ? (
                  <AutoDeleteIcon />
                ) : (
                  <EditDocumentIcon />
                )
              }
              label={
                val === "ADD"
                  ? "Added"
                  : val === "DELETE"
                  ? "Deleted"
                  : "Modified"
              }
              color={
                val === "ADD"
                  ? "success"
                  : val === "DELETE"
                  ? "error"
                  : "warning"
              }
              size="small"
              variant="outlined"
            />
          );
        },
      },

      {
        field: "creatorId",
        headerName: "Creator",
        flex: 0.8,
      
        renderCell: (p) => (
          <CustomChip
            icon={<AccountCircleIcon />}
            size="small"
            color="info"
            label={p.value}
            variant="outlined"
          />
        ),
      },

      {
        field: "reqDate",
        headerName: "Date",
        flex: 1,
       
        renderCell: (p) => (
          <Typography variant="body1" component="span" sx={styles.requestDate}>
            {timeStampFormatter(p.value)}
          </Typography>
        ),
      },

      {
        field: "actions",
        headerName: "Actions",
        flex: 0.7,
     
        renderCell: (p) => (
          <Stack
            direction="row"
            spacing={1}
            alignItems="center"
            justifyContent="center"
            style={styles.StackStyle}
          >
            <Tooltip title="Approve">
              <IconButton
                color="success"
                onClick={() => openConfirmDialog("accept", p.row.id)}
              >
                <Check />
              </IconButton>
            </Tooltip>

            <Tooltip title="Reject">
              <IconButton
                color="error"
                onClick={() => openConfirmDialog("reject", p.row.id)}
              >
                <Clear />
              </IconButton>
            </Tooltip>

            <Tooltip title="View">
              <IconButton onClick={() => handleViewClick(p.row)}>
                <Visibility />
              </IconButton>
            </Tooltip>
          </Stack>
        ),
      },
    ];
  }, []);

  return (
    <Box sx={styles.container}>
      <TemplateRequestAnalytics data={rows} />

      <DataGrid
        rows={rows}
        columns={allColumns}
        loading={dataGridLoading}
        disableRowSelectionOnClick
        pageSizeOptions={[5, 10, 25, 50]}
        initialState={{
          pagination: { paginationModel: { pageSize: 5 } },
          sorting: { sortModel: [{ field: "reqDate", sort: "desc" }] },
        }}
        getRowId={(row) => row.id}
        sx={styles.dataGrid}
        slots={{
          noRowsOverlay: () => (
            <Stack height="100%" alignItems="center" justifyContent="center">
              <InfoIcon sx={{ fontSize: 48, color: "text.secondary", mb: 2 }} />
              <Typography variant="h6">No Pending Requests Found</Typography>
              <Typography>
                All {selectedMenuItem.title} have been processed.
              </Typography>
            </Stack>
          ),
        }}
      />

      {/* View Dialog */}
      <ViewRequestDialog
        open={viewOpen}
        handleClose={() => setViewOpen(false)}
        data={viewData}
      />

      {/* Confirm Dialog */}
      <Dialog
        maxWidth="sm"
        fullWidth="true"
        open={confirmDialog.open}
        onClose={closeConfirmDialog}
      >
        <DialogTitle>
          {confirmDialog.type === "accept"
            ? "Confirm Approval"
            : "Confirm Rejection"}
        </DialogTitle>
        <Divider />
        <DialogContent>
          <Typography>
            {confirmDialog.type === "accept"
              ? "Are you sure you want to approve the request?"
              : "Please provide remarks to reject this request."}
          </Typography>

          {confirmDialog.type === "reject" && (
            <TextField
              fullWidth
              label="Remarks"
              value={remarks}
              multiline
              rows={4}
              onChange={(e) => setRemarks(e.target.value)}
              margin="dense"
              slotProps={{
                htmlInput: {
                  maxLength: 200,
                },
              }}
              helperText={
                remarks?.length !== 0 && remarks?.length < 5
                  ? "Enter at least 5 characters"
                  : "Allowed 5-200 characters"
              }
              error={remarks?.length !== 0 && remarks?.length < 5}
            />
          )}
        </DialogContent>

        <DialogActions>
          <Button onClick={closeConfirmDialog}>Cancel</Button>
          <Button
            variant="contained"
            onClick={handleConfirm}
            color={confirmDialog.type === "accept" ? "success" : "error"}
          >
            {confirmDialog.type === "accept" ? "Approve" : "Reject"}
          </Button>
        </DialogActions>
      </Dialog>
      <LoadingOverlay loading={loading} />
    </Box>
  );
}



// --------------------------------------------------------------------------------------
// Template Request Analytics
// --------------------------------------------------------------------------------------

import React, { useMemo } from "react";
import { Box, Typography, Card, Stack, Chip } from "@mui/material";

import {
  PieChart,
  Pie,
  Cell,
  Tooltip,
  ResponsiveContainer,
  BarChart,
  Bar,
  XAxis,
  YAxis,
  CartesianGrid,
} from "recharts";

import { analyticsStyles as s } from "./TemplateRequestAnalyticsStyles";

const COLORS = ["#d87093", "#6a5acd", "#20b2aa"];

const RequestAnalytics = ({ data = [] }) => {
  const { total, pieData } = useMemo(() => {
    const counts = { add: 0, modify: 0, delete: 0 };

    data.forEach((d) => {
      if (d.changeType === "ADD") counts.add++;
      if (d.changeType === "UPDATE") counts.modify++;
      if (d.changeType === "DELETE") counts.delete++;
    });

    return {
      total: data.length,
      pieData: [
        { name: "Add Requests", value: counts.add },
        { name: "Modify Requests", value: counts.modify },
        // { name: "Delete Requests", value: counts.delete },
      ],
    };
  }, [data]);

  const histogramData = useMemo(() => {
    const map = {};
    data.forEach((item) => {
      if (item.reqDate) {
        const date = new Date(item.reqDate).toLocaleDateString("en-GB");
        map[date] = (map[date] || 0) + 1;
      }
    });

    return Object.keys(map).map((d) => ({ date: d, count: map[d] }));
  }, [data]);

  return (
    <Card sx={s.card}>
      <Typography sx={s.headerTitle}>Request Analytics Overview</Typography>
      <Typography variant="caption" sx={s.headerSubtitle}>
        Requests comparison by type and daily frequency
      </Typography>

      {total > 0 ? (
        <Box sx={s.wrapper}>
          {/* PIE SECTION */}
          <Box sx={s.pieWrapper}>
            <Box sx={s.pieChartBox}>
              <ResponsiveContainer>
                <PieChart>
                  <defs>
                    {COLORS.map((color, idx) => (
                      <linearGradient
                        key={idx}
                        id={`gradient-${idx}`}
                        x1="0"
                        y1="0"
                        x2="1"
                        y2="1"
                      >
                        <stop stopColor={color} stopOpacity={0.9} offset="0%" />
                        <stop
                          stopColor={color}
                          stopOpacity={0.5}
                          offset="100%"
                        />
                      </linearGradient>
                    ))}
                  </defs>

                  <Pie
                    data={pieData}
                    cx="50%"
                    cy="50%"
                    innerRadius={55}
                    outerRadius={80}
                    paddingAngle={3}
                    dataKey="value"
                  >
                    {pieData.map((_, i) => (
                      <Cell key={i} fill={`url(#gradient-${i})`} />
                    ))}
                  </Pie>
                </PieChart>
              </ResponsiveContainer>

              {/* Center Label */}
              <Box sx={s.pieCenterBox}>
                <Typography variant="caption" sx={s.pieCenterSubtitle}>
                  Total Requests
                </Typography>
                <Typography sx={s.pieCenterValue}>{total}</Typography>
              </Box>
            </Box>

            {/* Legend row */}
            <Stack direction="row" spacing={1.5} sx={s.legendRow}>
              {pieData.map((p, i) => (
                <Stack
                  key={p.name}
                  direction="row"
                  alignItems="center"
                  spacing={0.5}
                  sx={s.legendChipBox}
                >
                  <Box sx={s.legendColorDot(COLORS[i])} />
                  <Typography variant="caption">{p.name}</Typography>
                  <Chip
                    label={p.value}
                    sx={{ bgcolor: COLORS[i], color: "white" }}
                    size="small"
                  />
                </Stack>
              ))}
            </Stack>
          </Box>

          {/* BAR SECTION */}
          <Box sx={s.barChartArea}>
            <ResponsiveContainer>
              <BarChart data={histogramData}>
                <CartesianGrid
                  strokeDasharray="3 3"
                  stroke="rgba(255,255,255,0.3)"
                />
                <XAxis
                  dataKey="date"
                  stroke="white"
                  fontSize={10}
                  tickMargin={4}
                />
                <YAxis stroke="white" fontSize={10} />
                <Tooltip />
                <Bar
                  dataKey="count"
                  fill="url(#gradient-0)"
                  radius={[6, 6, 0, 0]}
                />
              </BarChart>
            </ResponsiveContainer>
          </Box>
        </Box>
      ) : (
        <Typography>No data to display</Typography>
      )}
    </Card>
  );
};

export default RequestAnalytics;



// -----------------------------------------------------------------------------------
// Template Request Analytics Styles
// -----------------------------------------------------------------------------------

export const analyticsStyles = {
  card: {
    p: 2,
    mb: 3,
  },

  headerTitle: {
    mb: 0.5,
    fontWeight: 600,
  },

  headerSubtitle: {
    color: "gray",
    mb: 2,
    display: "block",
  },

  wrapper: {
    display: "flex",
    flexDirection: { xs: "column", lg: "row" },
    gap: 2,
    alignItems: "flex-start",
  },

  pieWrapper: {
    flex: 1,
    position: "relative",
    height: 220,
    display: "flex",
    flexDirection: "column",
    alignItems: "center",
  },

  pieChartBox: {
    width: "100%",
    height: 180,
  },

  pieCenterBox: {
    position: "absolute",
    top: "50%",
    left: "50%",
    transform: "translate(-50%, -50%)",
    textAlign: "center",
  },

  pieCenterSubtitle: {
    color: "gray",
  },

  pieCenterValue: {
    fontWeight: "bold",
    color: "white",
  },

  legendRow: {
    mt: 1,
    flexWrap: "wrap",
    width: "100%",
    justifyContent: "center",
    alignItems: "center",
  },

  legendChipBox: {
    bgcolor: "rgba(255,255,255,0.05)",
    borderRadius: 2,
    px: 1,
    py: 0.3,
  },

  legendColorDot: (color) => ({
    width: 10,
    height: 10,
    borderRadius: "50%",
    bgcolor: color,
  }),

  barChartArea: {
    flex: 1,
    width: "100%",
    height: 220,
  },
};

export const paperStyles = {
  position: "fixed",
  top: 16,
  right: 16,
  zIndex: 3000,
  p: 2,
  pr: 2.5,
  borderRadius: 1,
  display: "flex",
  alignItems: "center",
  gap: 1.5,
  width: { xs: "90%", sm: 380 },
  backgroundColor: "rgba(255,255,255,0.7)",
  backdropFilter: "blur(10px)",
  cursor: "pointer",
  boxShadow: "0 8px 20px rgba(0,0,0,0.15)",
  transition: "all 0.25s ease",
  "&:hover": {
    transform: "scale(1.015)",
    boxShadow: "0 10px 24px rgba(0,0,0,0.22)",
  },
};

export const avatarStyles = {
  bgcolor: "#5D3FD3",
  width: 44,
  height: 44,
};

export const iconStyles = {
  fontSize: 22,
};

export const menuTitleStyles = {
  mb: 0.2,
};

export const messageTextStyles = {
  mb: 0.3,
  fontSize: "0.85rem",
  color: "text.primary",
};

export const captionTextStyles = {
  color: "text.secondary",
};




// -----------------------------------------------------------------------------
// View Request Dialog
/ ------------------------------------------------------------------------------

import React from "react";
import {
  Dialog,
  DialogTitle,
  DialogContent,
  DialogActions,
  Button,
  Typography,
  Grid,
  Box,
  Divider,
} from "@mui/material";
import {
  timeStampFormatter,
  toPascalKebabCase,
  formatKeyForDisplay,
} from "../../utils/CommonUtilities";

const ViewRequestDialog = ({ open, handleClose, data }) => {
  console.log("data in request >", data);
  console.log("Dialog open >", open);
  
  if (!open) return null;

  console.log("payload: ", data.payload);

  const { payload } = data;

  const mainDetails = [
    { label: "Creator ID", value: data.creatorId, size: 2 },
    {
      label: "Request Type",
      value: data.changeType === "ADD" ? "Create" : "Modified",
      size: 2.5,
    },
    {
      label: "Request Status",
      value: toPascalKebabCase(data.reqStatus),
      size: 2.5,
    },
    {
      label: "Requested Date",
      value: timeStampFormatter(data.reqDate),
      size: 5,
    },
  ];

  return (
    <Dialog open={open} onClose={handleClose} maxWidth="md" fullWidth="true">
      {/* Header */}
      <DialogTitle>
        Request Details - <b>ID: {data.id}</b>
      </DialogTitle>
      <Divider />

      {/* Content */}
      <DialogContent>
        {/* Main Details Section */}
        <Grid container spacing={2}>
          {mainDetails.map((item) => (
            <Grid size={{ xs: 12, sm: item.size }} key={item.label}>
              <Box sx={{ display: "flex", flexDirection: "column" }}>
                <Typography
                  variant="subtitle2"
                  sx={{
                    fontWeight: 800,
                    color: "text.secondary",
                  }}
                >
                  {item.label}
                </Typography>
                <Typography variant="body1" sx={{ color: "text.primary" }}>
                  {item.value ?? "N/A"}
                </Typography>
              </Box>
            </Grid>
          ))}
        </Grid>

        <Divider sx={{ m: 2 }} />

        {/* Payload Section */}

        <Grid container spacing={2}>
          {Object.entries(payload).map(([key, value]) => (
            <Grid size={{ xs: 12, sm: 4 }} key={key}>
              <Box
                sx={{
                  display: "flex",
                  flexDirection: "column",
                  //   width: "calc(50% - 1px)",
                }}
              >
                <Typography
                  variant="subtitle2"
                  sx={{
                    fontWeight: 800,
                    color: "text.secondary",
                    whiteSpace: "nowrap",
                    overflow: "hidden",
                    textOverflow: "ellipsis",
                  }}
                >
                  {formatKeyForDisplay(key)}
                </Typography>
                <Typography
                  variant="body1"
                  sx={{
                    color: "text.primary",
                    wordBreak: "break-word",
                  }}
                >
                  {String(value || "N/A")}
                </Typography>
              </Box>
            </Grid>
          ))}
        </Grid>
      </DialogContent>

      {/* Footer */}
      <Divider />
      <DialogActions sx={{ p: 2, justifyContent: "flex-end" }}>
        <Button
          onClick={handleClose}
          variant="contained"
          color="primary"
          sx={{ textTransform: "none", borderRadius: 2, px: 3 }}
        >
          Close
        </Button>
      </DialogActions>
    </Dialog>
  );
};

export default ViewRequestDialog;





// ‐------------------------------------------------------
// src/pages/template/CompareRequestDialog.jsx
// -------------------------------------------------------

import React, { useEffect, useState } from "react";
import {
  Dialog,
  DialogTitle,
  DialogContent,
  Divider,
  Grid,
  Typography,
  Box,
  CircularProgress,
  IconButton
} from "@mui/material";
import CloseIcon from "@mui/icons-material/Close";
import useApi from "../../hooks/useApi";

/**
 * =====================================================
 * Styles
 * =====================================================
 */
const styles = {
  sectionTitle: {
    fontWeight: 600,
    mt: 2,
    mb: 1
  },
  headerCell: {
    fontWeight: 600
  },
  normal: {
    p: 1,
    borderRadius: 1,
    bgcolor: "transparent"
  },
  oldChanged: {
    p: 1,
    borderRadius: 1,
    bgcolor: "#ffebee" // light red
  },
  newChanged: {
    p: 1,
    borderRadius: 1,
    bgcolor: "#e8f5e9" // light green
  },
  pre: {
    margin: 0,
    whiteSpace: "pre-wrap",
    wordBreak: "break-word",
    fontSize: 12
  }
};

/**
 * =====================================================
 * Helper: Render any value safely
 * =====================================================
 */
const renderValue = (value) => {
  if (value === null || value === undefined) {
    return "—";
  }

  // Primitive values
  if (
    typeof value === "string" ||
    typeof value === "number" ||
    typeof value === "boolean"
  ) {
    return String(value);
  }

  // Objects / Arrays → Pretty JSON
  return (
    <pre style={styles.pre}>
      {JSON.stringify(value, null, 2)}
    </pre>
  );
};

/**
 * =====================================================
 * CompareRequestDialog
 * =====================================================
 *
 * Shows OLD vs NEW report changes for UPDATE requests
 */
export default function CompareRequestDialog({ open, onClose, requestId }) {
  const { callApi } = useApi();

  const [diffs, setDiffs] = useState([]);
  const [loading, setLoading] = useState(false);

  /**
   * ---------------------------------------------------
   * Fetch diff when dialog opens
   * ---------------------------------------------------
   */
  useEffect(() => {
    if (!open || !requestId) return;

    setLoading(true);

    callApi(`/CR/api/request-diff/${requestId}`, {}, "GET")
      .then((res) => {
        // ⭐ IMPORTANT: diffs are inside res.data
        setDiffs(res?.data?.diffs || []);
      })
      .catch(() => {
        setDiffs([]);
      })
      .finally(() => setLoading(false));
  }, [open, requestId]);

  return (
    <Dialog open={open} onClose={onClose} maxWidth="lg" fullWidth>
      {/* ================================================= */}
      {/* Dialog Header                                     */}
      {/* ================================================= */}
      <DialogTitle sx={{ display: "flex", alignItems: "center" }}>
        <Typography variant="h6" sx={{ flexGrow: 1 }}>
          Report Change Comparison
        </Typography>

        <IconButton onClick={onClose}>
          <CloseIcon />
        </IconButton>
      </DialogTitle>

      <Divider />

      {/* ================================================= */}
      {/* Dialog Content                                    */}
      {/* ================================================= */}
      <DialogContent dividers>
        {loading ? (
          <Box textAlign="center" p={4}>
            <CircularProgress />
          </Box>
        ) : diffs.length === 0 ? (
          <Typography>No changes detected</Typography>
        ) : (
          diffs.map((section, idx) => (
            <Box key={idx} mb={4}>
              {/* ================= Section Title ================= */}
              <Typography sx={styles.sectionTitle}>
                {section.section}
                {section.identifier ? ` : ${section.identifier}` : ""}
              </Typography>

              {/* ================= Table Header ================= */}
              <Grid container spacing={2} mb={1}>
                <Grid item xs={3}>
                  <Typography sx={styles.headerCell}>Field</Typography>
                </Grid>
                <Grid item xs={4}>
                  <Typography sx={styles.headerCell}>Old Value</Typography>
                </Grid>
                <Grid item xs={4}>
                  <Typography sx={styles.headerCell}>New Value</Typography>
                </Grid>
              </Grid>

              {/* ================= Diff Fields ================= */}
              {section.fields.map((field, i) => (
                <Grid
                  container
                  spacing={2}
                  key={i}
                  alignItems="flex-start"
                  mb={1}
                >
                  {/* Field Name */}
                  <Grid item xs={3}>
                    <Typography>{field.field}</Typography>
                  </Grid>

                  {/* Old Value */}
                  <Grid item xs={4}>
                    <Box
                      sx={
                        field.changed
                          ? styles.oldChanged
                          : styles.normal
                      }
                    >
                      {renderValue(field.oldValue)}
                    </Box>
                  </Grid>

                  {/* New Value */}
                  <Grid item xs={4}>
                    <Box
                      sx={
                        field.changed
                          ? styles.newChanged
                          : styles.normal
                      }
                    >
                      {renderValue(field.newValue)}
                    </Box>
                  </Grid>
                </Grid>
              ))}

              <Divider sx={{ mt: 2 }} />
            </Box>
          ))
        )}
      </DialogContent>
    </Dialog>
  );
}
